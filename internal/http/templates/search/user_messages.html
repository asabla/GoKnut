<!-- User Messages Fragment (for HTMX partial updates and user profile messages) -->
{{if .IsEmpty}}
<div class="text-center py-12 text-gray-500">
    <svg class="mx-auto h-12 w-12 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
    </svg>
    <p class="mt-4 text-lg">No messages found</p>
    <p class="mt-1 text-sm">This user hasn't sent any messages{{if .ChannelName}} in this channel{{end}}</p>
</div>
{{else}}
<div class="space-y-4">
    <!-- Results count -->
    <div class="text-sm text-gray-400">
        Showing {{len .Messages}} of {{.TotalCount}} message{{if ne .TotalCount 1}}s{{end}}
    </div>

    <!-- Messages list -->
    <div class="divide-y divide-gray-700">
        {{range .Messages}}
        <div class="py-3 hover:bg-gray-700/30 transition-colors px-2 -mx-2 rounded">
            <div class="flex items-start justify-between">
                <div class="flex items-center space-x-2 text-sm">
                    <a href="/channels/{{.ChannelName}}/view" 
                       class="text-twitch-purple hover:text-purple-400 font-medium">
                        #{{if .ChannelName}}{{.ChannelName}}{{else}}{{.ChannelID}}{{end}}
                    </a>
                    <span class="text-gray-600">&middot;</span>
                    <time class="text-gray-500" datetime="{{.SentAt.Format "2006-01-02T15:04:05Z07:00"}}">
                        {{.SentAt.Format "Jan 02, 2006 15:04:05"}}
                    </time>
                </div>
            </div>
            <div class="mt-1 text-gray-200 break-words">
                {{.Text}}
            </div>
        </div>
        {{end}}
    </div>

    <!-- Pagination -->
    {{if or .HasPrev .HasNext}}
    <nav class="flex items-center justify-between pt-4 border-t border-gray-700" aria-label="Pagination">
        <div class="flex-1 flex justify-between sm:justify-end space-x-3">
            {{if .HasPrev}}
            <a href="/users/{{.Username}}/messages?page={{.PrevPage}}{{if .ChannelName}}&channel={{.ChannelName}}{{end}}"
               hx-get="/users/{{.Username}}/messages?page={{.PrevPage}}{{if .ChannelName}}&channel={{.ChannelName}}{{end}}"
               hx-target="#user-messages"
               hx-swap="innerHTML"
               class="relative inline-flex items-center px-4 py-2 border border-gray-600 text-sm font-medium rounded-md text-gray-300 bg-twitch-gray hover:bg-gray-700">
                Previous
            </a>
            {{end}}
            <span class="text-sm text-gray-400 self-center">
                Page {{.Page}} of {{.TotalPages}}
            </span>
            {{if .HasNext}}
            <a href="/users/{{.Username}}/messages?page={{.NextPage}}{{if .ChannelName}}&channel={{.ChannelName}}{{end}}"
               hx-get="/users/{{.Username}}/messages?page={{.NextPage}}{{if .ChannelName}}&channel={{.ChannelName}}{{end}}"
               hx-target="#user-messages"
               hx-swap="innerHTML"
               class="relative inline-flex items-center px-4 py-2 border border-gray-600 text-sm font-medium rounded-md text-gray-300 bg-twitch-gray hover:bg-gray-700">
                Next
            </a>
            {{end}}
        </div>
    </nav>
    {{end}}
</div>
{{end}}
